<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<script src="js/jquery-1.8.0.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/vue.js" type="text/javascript" charset="utf-8"></script>
		<link rel="stylesheet" type="text/css" href="css/animate.css" />
		<title>Vue演示例子</title>
		<style type="text/css">
			em,
			i {
				display: block;
				font-size: 18px;
				color: white;
				font-style: normal;
				font-weight: bold;
				/*width: 100%;*/
				background-color: #966400;
				margin: 10px 0px;
				box-shadow: #666666 2px 2px 5px 1px;
				padding: 3px;
			}
			
			i {
				background-color: #9e9e9e;
				margin-left: 15px;
				font-size: 14px;
			}
			
			ul {
				list-style-type: decimal;
			}
			
			table {
				border: 1px solid #A5A5A5;
				border-collapse: collapse;
				border-spacing: 0px;
			}
			
			tr,
			td {
				border: 1px solid #A5A5A5;
				border-collapse: collapse;
			}
			
			.expand-transition {
				transition: all 2s ease;
				height: 30px;
				padding: 10px;
				background-color: #eee;
				overflow: hidden;
			}
			
			.expand-enter,
			.expand-leave {
				height: 0;
				padding: 0 10px;
				opacity: 0.3;
			}
		</style>
	</head>

	<body>

		<div id="sim1">
			<em>#简单显示、双向绑定，参数特性</em>
			<p>{{msg}}</p>
			立即<input type="text" v-model="msg" /> 移出文本框才更新
			<input type="text" v-model="msg" lazy/> 我会延迟500毫秒
			<input type="text" v-model="msg" debounce="500" /> 数值
			<input type="text" v-model="num" number/>{{num}}

			<em>#列表渲染、新增项，删除项，样式绑定，条件渲染，模版包含，隐藏显示<span v-show="newtodo.name!==''">[正在输入]</span></em>

			<div v-if="Math.random() > 0.5">
				今天心情：好
			</div>
			<div v-else>
				今天心情：不好
			</div>

			<template v-if="newtodo.name==123">[不容许添加{{newtodo.name}}]</template>
			<span v-else="newtodo.name==123">[可以添加]</span> 名称:
			<input type="text" v-model="newtodo.name" /> 年龄：<input type="text" v-model="newtodo.age" />
			<input type="button" v-on:click="addTodo" value="新增" :style="{fontSize: '18px' }" />
			<span style="color: red;">
				{{errormsg}}
			</span>
			<table>
				<tr v-for="mo in todos" v-if="mo.name!=123">
					<td v-bind:href.literal="不解析">{{$index+1}}</td>
					<td v-bind:alt="mo.name">名称：{{{mo.name | conlog}}} </td>
					<td :data-haha="mo.age">年龄：{{mo.age}} </td>
					<td :class="mo.cs">年龄（虚岁）：{{xage}} </td>
					<td :class="mo.cs">是否男：<input type="checkbox" v-model="mo.sex" name="{{mo.name}}" /> </td>
					<td :class="[mo.ts.classA,mo.ts.classB,mo.cs]">全名：{{fullname}} </td>
					<td :class="[mo.ts.classA,mo.ts.classB,mo.cs]">当前对象属性：
						<ul>
							<li v-for="value in mo">
								{{ $key }} : {{ value }}
							</li>
						</ul>
					</td>
					<td>修改名称:<input type="text" v-model="mo.name" />
						<input type="button" value="保存修改(简写绑定事件)" @click="saveName(mo)" />
						<input type="button" value="删除" v-on:click="removeTodo()" /></td>
				</tr>

			</table>

			<em>#事件修饰符，按键修饰符</em> 方法自动添加：event.stopPropagation()
			<input type="button" value="sayhi-stop" v-on:click.stop="sayhi" />
			<br/> 方法自动添加：event.preventDefault()
			<input type="button" value="sayhi-prevent" v-on:click.prevent="sayhi" /> 2个叠加
			<input type="button" value="sayhi-prevent-stop" v-on:click.stop.prevent="sayhi" />
			<br/> 可以自定义别名或使用预置别名，还可以使用单子母按键
			<!--
            	// 可以使用 @keyup.f1 
            	Vue.directive('on').keyCodes.f1 = 112
            -->

			<input type="text" value="sayhi-enter，按回车才触发" v-on:keyup.enter="sayhi" />

			<em>#表单控件绑定</em> 单选
			<br />
			<input type="checkbox" v-model="domake" id="doit" :true-value="a" :false-value="b" /> <label for="doit">做吗？</label> {{domake}}
			<br /> 多个勾选框，绑定到同一个数组：
			<br />
			<input type="checkbox" id="jack" value="Jack" v-model="checkedNames">
			<label for="jack">Jack</label>
			<input type="checkbox" id="john" value="John" v-model="checkedNames">
			<label for="john">John</label>
			<input type="checkbox" id="mike" value="Mike" v-model="checkedNames">
			<label for="mike">Mike</label>
			<span transition="expand">当前选择名称: {{ checkedNames | json }}</span>
			<br>
			<select v-model="selected" multiple>
			  <option selected>A</option>
			  <option>B</option>
			  <option>C</option>
			</select>
			<span>Selected: {{ selected | json }}</span>

			<em>#过渡(分为几个阶段，且可以使用纯css和js动态添加)</em>
			<input type="checkbox" name="" id="" value="" v-model="showtran" />显示按钮（纯css）
			<input type="button" id="" value="我飞来咯，我非走咯" v-if="showtran" class="animated" transition="bounce" />

			<input type="checkbox" name="" id="" value="" v-model="showtran" />自定义过渡钩子（js）
			<input type="button" id="" value="我飞来咯，我非走咯" v-if="showtran" class="animated" transition="bounceWO" />

			<em>#组件</em>
			<i>#使用组件</i>

			<my-star>
				<my-starchild></my-starchild>
			</my-star>

			<my-star1></my-star1>
			IS特性可以自动判断是否适合当前元素嵌套
			<select name="">
				<option is="my-star1"></option>
				<td is="my-star1"></td>
			</select>
			
			
			<i>#Props</i>

		</div>

	</body>

	<script type="text/javascript">
		//使用组件
		var mystarchild = Vue.extend({
			template: '<div>A start child component!</div>'
		})

		var mystar = Vue.extend({
			//2个特殊选项-1
			data: function() {
				return {
					a: 1
				};
			}, //2个特殊选项-2
			el: function() {
				return "";
			},
			template: '<div>A start component!</div>',

			//下级局部注册(只能在my-star组件内使用)
			components: {
				"my-starchild": mystarchild
			}
		});

		//全局注册
		Vue.component("my-star", mystar);
		//其他注册方式，内部调用extend
		Vue.component("my-star1", {
			template: '<option>A start1 component!</option>'
		});

		var sim1 = new Vue({
			el: "#sim1", //作用区域ID
			//数据操作对象
			data: {
				a: "a",
				b: "b",
				msg: "hello vue!",
				num: 1,
				domake: false,
				showtran: false,
				checkedNames: [],
				selected: [],
				newtodo: {
					name: '',
					age: 0
				},
				errormsg: "",
				todos: [{
					name: '<b>123<b/>',
					age: 23,
					sex: true,
					cs: {
						tb: true,
						lb: false,
						rb: "rb"
					},
					ts: {
						classA: 'class-a',
						classB: 'class-b'
					}
				}, {
					name: '456',
					age: 15,
					ts: {
						classA: 'class-c',
						classB: 'class-d'
					}
				}]
			},
			//公共方法
			methods: {
				saveName: function(mo) {
					console.log(mo.name + "->保存成功!");
				},
				addTodo: function() {
					if (this.newtodo.name.trim()) {
						this.todos.push({
							name: this.newtodo.name,
							age: this.newtodo.age
						});
						this.newtodo = {
							name: '',
							age: 0
						};
					} else {
						this.errormsg = "请填写名称";
					}
				},
				removeTodo: function(index) {
					this.todos.splice(index, 1);
				},
				sayhi: function() {
					alert("sayhi!");
				}
			},
			//过滤器
			filters: {
				conlog: function(ag1) {
					console.log(ag1);
				}
			},
			//计算属性
			computed: {
				xage: function(mo) {
					return "无";
				},
				fullname: {
					get: function() {
						return "getfullname";
					},
					set: function(newValue) {
						return this.newtodo.name = newValue;
					}
				}
			}
		});

		//过渡触发别名
		Vue.transition('bounce', {
			enterClass: 'bounceInLeft',
			leaveClass: 'bounceOutRight'
		})

		//过渡钩子，这里就需要自己添加过渡样式，框架不会自动
		Vue.transition('bounceWO', {

			beforeEnter: function(el) {
				$(el).addClass("fadeInDown");
				console.log("beforeEnter");
			},
			enter: function(el, done) {
				console.log('enter');
			},
			afterEnter: function(el) {
				console.log('afterEnter');
			},
			enterCancelled: function(el) {
				// handle cancellation
			},

			beforeLeave: function(el) {
				$(el).addClass("fadeInUp");
			},
			leave: function(el) {
				console.log('leave');
			},
			afterLeave: function(el) {
				console.log('afterLeave');
			},
			leaveCancelled: function(el) {
				// handle cancellation
			}
		})

		//属性变化监控
		sim1.$watch("newtodo", function(newVal, oldVal) {
			console.log("%o===%o", newVal, oldVal);
		});
	</script>

</html>